<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MapBox Maps API Exercise</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet'/>

    <style>
        #map {
            width: 100%;
            height: 600px;

        }
    </style>
</head>
<body>

<div id='map'></div>
<script src="js/keys.js"></script>
<script src="js/mapbox-geocode-utils.js"></script>
<script>
    "use strict";

    var restaurants = [
        {
            name: 'Nama Ramen',
            address: 'Nama Ramen, San Antonio, TX',
            message: 'Ramen so good!'
        },
        {
            name: 'Earth Burger',
            address: 'Earth Burger, San Antonio, TX',
            message: 'Too good!'
        },
        {
            name: 'Hon Machi Korean BBQ',
            address: 'Hon Machi Korean BBQ, San Antonio, TX',
            message: 'To die for!'
        }
    ];


    mapboxgl.accessToken = mapboxKey;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        center: [-98.4996, 29.6052],
        zoom: 14
    });



    //customize map
    //map.setCenter();
    //map.setZoom();

    //markers

    // var marker = new mapboxgl.Marker();
    //
    // marker.setLngLat({lng:-98.4916 , lat: 29.4260 });
    // marker.addTo(map);
    //
    // //popup
    // //a little box that can be attached to a marker that has text that describes a place foodies wooo
    //
    // var popup = new mapboxgl.Popup();
    //
    // popup.setHTML("<h3>San Antonio!</h3>");
    // marker.setPopup(popup); // adds it to map
    //
    // // events
    //
    // map.on('click', function(){
    //     console.log("hello");
    // });

    //geocoding

    restaurants.forEach(function(restaurant){
        geocode(restaurant.address, mapboxKey).then(function(coords) {

            //create a marker usinf coords
            var popup = new mapboxgl.Popup()
            .setHTML('<h3>' + restaurant.name + '</h3>' + '<p>' + restaurant.message + '</p>');

            var marker = new mapboxgl.Marker()

                .setLngLat(coords)
                .addTo(map)
                .setPopup(popup);


            // console.log(address);
            // map.setCenter(result);
            // map.setZoom(14);

        });
    });
    // geocode("San Antonio, TX", mapboxKey).then(function(result) {
    //     console.log(result);
    //     map.setCenter(result);
    //     // map.setZoom(14);
    //
    // });


    // //food place 1 Nama Ramen
    // var marker = new mapboxgl.Marker();
    //
    // marker.setLngLat({lng:-98.613804, lat: 29.556125 });
    // marker.addTo(map);
    //
    // var popup = new mapboxgl.Popup();
    //
    // popup.setHTML("<h3>Nama Ramen</h3>");
    // marker.setPopup(popup); // adds it to map
    //
    // //food place two Earth Burger
    // var marker2 = new mapboxgl.Marker();
    //
    // marker2.setLngLat({lng:-98.504895, lat: 29.519379 });
    // marker2.addTo(map);
    //
    // var popup2 = new mapboxgl.Popup();
    //
    // popup2.setHTML("<h3>Earth Burger</h3>")
    // marker2.setPopup(popup2);
    //
    // //food place 3
    //
    // var marker3 = new mapboxgl.Marker();
    //
    // marker3.setLngLat({lng:-98.512403, lat: 29.621354 });
    // marker3.addTo(map);
    //
    // var popup3 = new mapboxgl.Popup();
    //
    // popup3.setHTML("<h3>Hon Machi Korean BBQ</h3>")
    // marker3.setPopup(popup3);


    // reverse geocode method from mapbox-geocoder-utils.js

    // reverseGeocode({lng: -98.4861, lat: 29.4260}, map).then(function(results) {
    //     // logs the address for The Alamo
    //     console.log(results);
    // });


    //
    // //popup
    // //a little box that can be attached to a marker that has text that describes a place foodies wooo
    //
    // var popup = new mapboxgl.Popup();
    //
    // popup.setHTML("<h3>San Antonio!</h3>");
    // marker.setPopup(popup); // adds it to map
    //
    // // events
    //
    // map.on('click', function(){
    //     console.log("hello");
    // });






</script>
</body>
</html>